<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Informe de Notas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        :root { 
            --primary: #0D2C63; 
            --primary-2: #1a4480; 
            --muted: #6c757d; 
        }
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            color: #222; 
            margin: 0; 
            padding: 18px; 
            background: #fff;
            font-size: 14px; 
        }
        .boleta-wrapper{ max-width:900px; margin:0 auto; border:1px solid #e7e9ee; padding:18px; border-radius:8px }
        .header{ display:flex; gap:12px; align-items:center; border-bottom:4px solid var(--primary); padding-bottom:12px; margin-bottom:12px }
        .logo{ width:84px; height:84px; object-fit:cover; border-radius:6px; border:2px solid #fff; box-shadow:0 2px 6px rgba(13,44,99,0.12) }
        .school-info{ flex:1 }
        .school-info h2{ margin:0; color:var(--primary); font-size:20px; letter-spacing:0.4px }
        .school-info p{ margin:2px 0; color:var(--muted); font-size:13px }
        .report-title{ text-align:right; min-width:180px }
        .report-title h3{ margin:0; color:var(--primary-2); font-size:16px }
        .meta{ display:flex; gap:12px; margin:14px 0 }
        .meta .box{ flex:1; padding:10px; border:1px solid #eef2fb; border-radius:6px; background:#fbfdff }
        .meta .box strong{ display:block; color:var(--primary); margin-bottom:6px }
        table.boleta-table{ width:100%; border-collapse:collapse; margin-top:6px }
        table.boleta-table thead th{ background:linear-gradient(90deg,var(--primary),var(--primary-2)); color:#fff; padding:10px; font-weight:700; font-size:13px; border:1px solid #dee2e6 }
        table.boleta-table tbody td{ padding:9px; border:1px solid #dee2e6; font-size:13px; text-align:center }
        table.boleta-table tbody tr:nth-child(even){ background:#fbfdff }
        .historial-header{ text-align:center; background:#f8f9fa; border:1px solid #dee2e6; padding:8px; font-weight:bold }
        .faltas-asistencia{ margin-top:20px; border:1px solid #dee2e6; padding:10px }
        .faltas-asistencia table{ width:100%; border-collapse:collapse }
        .faltas-asistencia td{ border:1px solid #dee2e6; padding:5px; text-align:center; font-size:12px }
        .faltas-asistencia th{ background:#f8f9fa; border:1px solid #dee2e6; padding:5px; font-size:12px }
        .escuela-padres{ margin-top:10px; border:1px solid #dee2e6; padding:10px }
        .equivalencias{ margin-top:12px; display:flex; gap:12px }
        .equivalencias .card{ flex:1; padding:10px; border:1px dashed #e6eefc; border-radius:6px; background:#fff }
        .equivalencias small{ color:var(--muted) }
        .footer{ margin-top:14px; display:flex; justify-content:space-between; align-items:center; color:var(--muted); font-size:12px }
        @media print{
            body{ padding:0 }
            .boleta-wrapper{ border:0; box-shadow:none; }
        }
    </style>
</head>
<body>
    <div class="boleta-wrapper">
        <div class="header">
            <h1>"AMADO SEA EN TODAS PARTES EL SAGRADO CORAZÓN DE JESÚS"</h1>
            <h2>Colegio Santa María</h2>
            <h3>Hijas de Santa María del Corazón de Jesús</h3>
            <div>INFORME DE NOTAS AÑO {{ ano_lectivo.ano }}</div>
        </div>

        <div class="student-info">
            <div>ALUMNO/ALUMNA: {{ estudiante.apellidos }}, {{ estudiante.nombres }}</div>
            <div>GRADO: {{ seccion.grado.nombre_grado }} SECCIÓN: {{ seccion.nombre_seccion }} NIVEL: {{ seccion.grado.nivel }} FECHA: {{ fecha_actual }}</div>
        </div>

        <div class="meta">
            <div class="box">
                <strong>Alumno/a</strong>
                <div>{{ estudiante.nombres }} {{ estudiante.apellidos }}</div>
                <small class="text-muted">NIE: {{ estudiante.nie }}</small>
            </div>
            <div class="box">
                <strong>Grado / Sección</strong>
                {% if asignacion %}
                    <div>{{ asignacion.seccion.grado.nombre_grado }} - {{ asignacion.seccion.nombre_seccion }}</div>
                {% else %}
                    <div>{{ seccion.grado.nombre_grado }} - {{ seccion.nombre_seccion }}</div>
                {% endif %}
            </div>
            <div class="box">
                <strong>Materia</strong>
                {% if asignacion %}
                    <div>{{ asignacion.materia.nombre_materia }}</div>
                {% else %}
                    <div>Todas las materias</div>
                {% endif %}
            </div>
        </div>

        <div class="historial-header">HISTORIAL DE LAS CALIFICACIONES</div>
        <table class="boleta-table">
            <thead>
                <tr>
                    <th style="text-align:left">MATERIAS</th>
                    <th style="width:10%">TRIM</th>
                    <th style="width:10%">EXAMEN</th>
                    <!-- Columna actitud eliminada -->
                    <th style="width:8%">1°P</th>
                    <th style="width:8%">2°P</th>
                    <th style="width:8%">3°P</th>
                    <th style="width:8%">4°P</th>
                    <th style="width:8%">FINAL</th>
                </tr>
            </thead>
            <tbody>
                {% for materia in materias %}
                <tr>
                    <td style="text-align:left">{{ materia.nombre_materia }}</td>
                    <td>{{ materia.trimestre|default('--') }}</td>
                    <td>{{ materia.examen|default('--') }}</td>
                    <!-- Celda actitud eliminada -->
                    <td>{{ materia.periodo1|default('--') }}</td>
                    <td>{{ materia.periodo2|default('--') }}</td>
                    <td>{{ materia.periodo3|default('--') }}</td>
                    <td>{{ materia.periodo4|default('--') }}</td>
                    <td>{{ materia.final|default('--') }}</td>
                </tr>
                {% endfor %}
                <tr>
                    <td colspan="3" style="text-align:right"><strong>PROMEDIO GLOBAL:</strong></td>
                    <td colspan="6" style="text-align:left"><strong>{{ promedio_global|default('--') }}</strong></td>
                </tr>
            </tbody>
        </table>
        
        <!-- Sección de faltas de asistencia eliminada -->
                    <th>Feb</th>
                    <th>Mar</th>
                    <th>Abr</th>
                    <th>May</th>
                    <th>Jun</th>
                    <th>Jul</th>
                    <th>Ago</th>
                    <th>Sep</th>
                    <th>Oct</th>
                    <th>TOTAL</th>
                </tr>
                <tr>
                    <td>{{ faltas.ene|default('-') }}</td>
                    <td>{{ faltas.feb|default('-') }}</td>
                    <td>{{ faltas.mar|default('-') }}</td>
                    <td>{{ faltas.abr|default('-') }}</td>
                    <td>{{ faltas.may|default('-') }}</td>
                    <td>{{ faltas.jun|default('-') }}</td>
                    <td>{{ faltas.jul|default('-') }}</td>
                    <td>{{ faltas.ago|default('-') }}</td>
                    <td>{{ faltas.sep|default('-') }}</td>
                    <td>{{ faltas.oct|default('-') }}</td>
                    <td>{{ faltas.total|default('0') }}</td>
                </tr>
            </table>
        </div>
        
        <div class="escuela-padres">
            <strong>ESC. DE PADRES</strong>
            <table>
                <tr>
                    <th>01</th>
                    <th>02</th>
                    <th>03</th>
                    <th>04</th>
                </tr>
                <tr>
                    <td>{{ esc_padres.p1|default('SI') }}</td>
                    <td>{{ esc_padres.p2|default('SI') }}</td>
                    <td>{{ esc_padres.p3|default('-') }}</td>
                    <td>{{ esc_padres.p4|default('-') }}</td>
                </tr>
            </table>
        </div>

        <div class="equivalencias">
            <div class="equivalencias-title">EQUIVALENCIAS</div>
            <div>E: Excelente (10-9) • MB: Muy Bueno (8-7) • B: Bueno (6-5) • R: Regular (4-3) • NM: Necesita Mejorar (2-1)</div>
        </div>

        <div class="nota-minima">* LA NOTA MÍNIMA DEL COLEGIO ES 7.0</div>

        <div style="text-align: center; margin-top: 30px;">
            <div>HNA. CORAZÓN DE MARÍA</div>
            <div>H.SMCJ</div>
        </div>

        <div class="footer">
            <div>Av. Independencia Sur y 37 Calle Oriente, Barrio Nuevo, Santa Ana, El Salvador</div>
            <div>Email: colegiosantamaria@hotmail.es Tel.: 2440-1490 www.hscmj.org</div>
        </div>
    </div>
</body>
</html>
